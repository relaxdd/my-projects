{"version":3,"sources":["hooks/useDidUpdateEffect.js","utils.ts","router/MainRouter.tsx","Context.ts","hooks/useLocationChange.js","images/icons/shopping-cart-white.svg","components/cart/HeaderCartItem.tsx","components/cart/HeaderCart.tsx","ui/header/Header.tsx","hooks/useFetch.ts","tools/wc-api.ts","ui/Loader.js","components/product/ProductContent.tsx","components/widgets/TextWidget.tsx","images/phone-call.png","images/whatsapp.png","images/email.png","components/widgets/NavWidget.tsx","ui/sidebar/Sidebar.tsx","pages/Product.tsx","images/icons/delete.svg","images/icons/delete-red.svg","components/cart/CartItem.tsx","pages/Cart..tsx","components/products/ProductItem.tsx","components/products/ProductList.tsx","store/redux.ts","types/enums.ts","store/reducers/FilterReducer.ts","components/filter/blocks/FilterRange.tsx","components/filter/blocks/FilterCategory.tsx","components/filter/blocks/FilterOrderby.tsx","components/filter/blocks/FilterSearch.tsx","components/filter/blocks/ClearFilter.tsx","components/filter/ProductsFilter.tsx","hooks/useProducts.js","components/pagination/Pagination.tsx","api/rest.ts","store/reducers/GoodsReducer.ts","pages/Catalog.tsx","router/index.ts","store/index.ts","App.tsx","index.tsx","components/product/ProductSlider.tsx"],"names":["useDidUpdateEffect","effect","deps","didMount","useRef","useEffect","current","price_format","price","location","Intl","NumberFormat","format","calcTotalCart","cart","total","key","qty","pushCart","id","product","new_cart","getMapProduct","product_map","name","img","images","src","image","parseFloat","price_html","MainRouter","routes","redirect","map","route","path","exact","Fragment","Helmet","title","component","to","Context","React","createContext","CartContext","FilterContext","useLocationChange","action","useLocation","HeaderCartItem","removeProduct","useContext","className","alt","onLoad","e","target","style","height","getComputedStyle","width","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","onClick","HeaderCart","useState","setPath","showCart","setShowCart","cartMap","cartCounter","totalCart","pathname","split","filter","item","Boolean","icon_cart_path","Object","keys","Header","useFetch","callback","isLoading","setLoading","status","message","isError","setError","fetching","a","wcApi","WooCommerceRestApi","url","consumerKey","consumerSecret","version","axiosConfig","headers","Loader","role","ProductContent","calcTotal","addToCart","useParams","setProduct","setQty","inCart","setInCart","get","data","cartKeys","length","includes","ProductSlider","type","value","onChange","parseInt","categories","ind","description","TextWidget","href","rel","NavWidget","Sidebar","Product","CartItem","min","max","trash","onMouseEnter","setAttribute","trash_h","onMouseLeave","sizes_td","Colgroup","THead","TBody","TFoot","colSpan","Cart","gap","ProductItem","push","useHistory","String","ProductList","products","useAppDispatch","useDispatch","useAppSelector","useSelector","OrderbyEnum","asc","desc","default","initialState","category","maxCost","orderby","searchQuery","FilterSlice","createSlice","reducers","setCategory","state","payload","setMaxCost","setOrderby","setSearchQuery","FilterReducer","reducer","actions","FilterRange","dispatch","minRange","setMinRange","maxRange","setMaxRange","currentRange","setCurrentRange","sortedPosts","min_max","productsList","prices","Math","calc_min_max","step","onInput","onMouseUp","FilterCategory","store","count","FilterOrderby","FilterSearch","placeholder","ClearFilter","ProductsFilter","useSortedByCategoryProducts","useMemo","some","cat","sortByCategory","useSortedByCostProducts","sortedByCost","cost","sortByCost","useSortedByOrderbyProducts","sortedByOrderby","sort","b","sortByOrderby","useProducts","query","byCategory","byMaxCost","bySearch","filtredPosts","post","toLowerCase","trim","searchByQuery","useSortedBySearchProducts","Pagination","page","setPage","GoodsReducer","list","from","Array","_","i","fillArrayFromTo","ProductService","totalPages","read_categories","console","error","Error","limit","getProducts","isNext","axios","getProductById","res","fetchGoods","createAsyncThunk","rejectWithValue","signal","per_page","goods","errorText","extraReducers","builder","addCase","fulfilled","rejected","Catalog","useStateIfMounted","setCategories","setLimit","goodsPromise","getCategories","abort","Provider","rootReducer","combineReducers","configureStore","App","setCartMap","setCartCounter","setTotalCart","localStorage","getItem","localCart","JSON","parse","setItem","stringify","cartList","reduce","obj","filterCart","prev","ReactDOM","render","document","getElementById","ProductImage","wrapperRef","wrapper","container","imgHeight","$","css","find","sliderRef","previewRef","sliderPrms","items","dots","nav","margin","responsive","autoHeight","onChanged","el","sync2","index","removeClass","eq","addClass","onscreen","start","first","last","trigger","previewPrms","onInitialized","slideBy","responsiveRefreshRate","sync1","number","display","ref","owlItem","activeClass","previewClick"],"mappings":"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","file":"static/js/main.ee6b2155.chunk.js","sourcesContent":["import { useRef, useEffect } from \"react\";\r\n\r\nfunction useDidUpdateEffect(effect, deps) {\r\n  const didMount = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (didMount.current) {\r\n      effect();\r\n    } else {\r\n      didMount.current = true;\r\n    }\r\n  }, [...deps]); // eslint-disable-line react-hooks/exhaustive-deps\r\n}\r\n\r\nexport default useDidUpdateEffect;\r\n","import { OrderbyType } from \"./types/enums\";\r\nimport { ICartShop } from \"./types/types\";\r\nimport { IMapProduct } from \"./types/types\";\r\nimport { WC_REST_API_Product, WC_REST_API_Products } from \"./types/wc-types\";\r\n\r\nexport const sortByCategory = (\r\n  category: number = -1,\r\n  products: WC_REST_API_Products\r\n) => {\r\n  return category === -1\r\n    ? products\r\n    : products.filter((item) =>\r\n        item.categories.some((cat) => cat.id === category)\r\n      );\r\n};\r\n\r\nexport const sortByCost = (cost: number, products: WC_REST_API_Products) => {\r\n  return products.filter((item) => parseFloat(item.price) <= cost);\r\n};\r\n\r\nexport const sortByOrderby = (\r\n  orderby: OrderbyType,\r\n  products: WC_REST_API_Products\r\n) => {\r\n  if (orderby === \"default\") return products;\r\n\r\n  return products.sort((a, b) => {\r\n    if (orderby === \"asc\") return parseFloat(a.price) - parseFloat(b.price);\r\n    if (orderby === \"desc\") return parseFloat(b.price) - parseFloat(a.price);\r\n    else return null;\r\n  });\r\n};\r\n\r\n/**\r\n * Filtering products by search query\r\n *\r\n * @param { string } query search query\r\n * @param { WC_REST_API_Products } products list of products\r\n * @returns { WC_REST_API_Products } filtered list of products\r\n */\r\nexport const searchByQuery = (\r\n  query: string,\r\n  products: WC_REST_API_Products\r\n) => {\r\n  return query !== \"\"\r\n    ? products.filter((post) =>\r\n        post.name.toLowerCase().includes(query.toLowerCase().trim())\r\n      )\r\n    : products;\r\n};\r\n\r\nexport const price_format = (price: number, location: string = \"ru-RU\") => {\r\n  return new Intl.NumberFormat(location).format(price);\r\n};\r\n\r\n/**\r\n * Calculation of the total cost of the goods, taking into account its quantity\r\n *\r\n * @param { ICartShop } cart\r\n * @returns { number } the total amount, taking into account the number of goods and its price\r\n */\r\nexport const calcTotalCart = (cart: ICartShop): number => {\r\n  let total = 0;\r\n\r\n  for (const key in cart) {\r\n    total += cart[key].price * cart[key].qty;\r\n  }\r\n\r\n  return total;\r\n};\r\n\r\n/**\r\n * Deleting an item from the shopping cart by ID\r\n *\r\n * @param { string } id id of the item being deleted from the cart\r\n * @param { ICartShop } cartList shopping cart with goods\r\n * @returns { ICartShop } filtered shopping cart of goods\r\n */\r\nexport const filterCart = (id: string, cartList: ICartShop): ICartShop => {\r\n  return Object.keys(cartList)\r\n    .filter((key) => key !== id)\r\n    .reduce((obj, key) => {\r\n      obj[key] = cartList[key];\r\n      return obj;\r\n    }, {});\r\n};\r\n\r\n/**\r\n * Adding a new product to the shopping cart\r\n *\r\n * @param { string } id\r\n * @param { IMapProduct } product\r\n * @param { ICartShop } cart\r\n * @returns { ICartShop } new cart\r\n */\r\nexport const pushCart = (\r\n  id: string,\r\n  product: IMapProduct,\r\n  cart: ICartShop\r\n): ICartShop => {\r\n  let new_cart = {};\r\n\r\n  new_cart = {\r\n    ...cart,\r\n  };\r\n  new_cart[id] = product;\r\n\r\n  return new_cart;\r\n};\r\n\r\n/**\r\n * Filling an array with numbers\r\n *\r\n * @param { number } from the number from which the filling begins\r\n * @param { number } to the end of filling the array\r\n * @param { number } step step between filling numbers\r\n * @returns { number[] } array of numbers\r\n */\r\nexport const fillArrayFromTo = (\r\n  from: number,\r\n  to: number,\r\n  step: number = 1\r\n): number[] => {\r\n  return Array.from(\r\n    { length: (to - from) / step + 1 },\r\n    (_, i) => from + i * step\r\n  );\r\n};\r\n\r\nexport const calc_min_max = (productsList: WC_REST_API_Products) => {\r\n  let prices: number[] = [];\r\n  prices.push(...productsList.map((product) => parseInt(product.price)));\r\n  return [Math.min(...prices), Math.max(...prices)];\r\n};\r\n\r\nexport const getMapProduct = (\r\n  product: WC_REST_API_Product,\r\n  qty: number = 1\r\n) => {\r\n  const product_map: IMapProduct = {\r\n    id: product.id,\r\n    name: product.name,\r\n    img: product.images[0].src ?? \"https://via.placeholder.com/300x300\",\r\n    image: product.images[0],\r\n    price: parseFloat(product.price),\r\n    qty,\r\n    total: parseFloat(product.price) * qty,\r\n    price_html: product.price_html,\r\n  };\r\n\r\n  return product_map;\r\n};\r\n\r\nexport const findAndReplaceList = (newItem: any, someList: any) => {\r\n  return someList.map((item: { _id: any }) =>\r\n    item._id !== newItem._id ? item : { ...newItem }\r\n  );\r\n};\r\n","import React, { FC } from \"react\";\r\nimport { Route, Switch, Redirect } from \"react-router-dom\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport IRoute from \"../types/IRoute\";\r\n\r\ninterface AppRouterProps {\r\n  routes: IRoute[];\r\n  redirect: string;\r\n}\r\n\r\nconst MainRouter: FC<AppRouterProps> = ({ routes, redirect }) => {\r\n  return (\r\n    <Switch>\r\n      {routes.map((route, id) => (\r\n        <Route path={route.path} exact={route.exact} key={id}>\r\n          <React.Fragment>\r\n            <Helmet>\r\n              <title>{route.title}</title>\r\n            </Helmet>\r\n            <route.component />\r\n          </React.Fragment>\r\n        </Route>\r\n      ))}\r\n      <Redirect to={redirect} />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default MainRouter;\r\n","import { WC_REST_API_Categories, WC_REST_API_Products } from \"./types/wc-types\";\r\nimport React from \"react\";\r\n\r\ninterface IC {\r\n  products: WC_REST_API_Products;\r\n  categories: WC_REST_API_Categories;\r\n  category: number;\r\n}\r\n\r\ninterface IFC {\r\n  sortedPosts: WC_REST_API_Products;\r\n  limit: number;\r\n  setLimit: (limit: number) => void;\r\n}\r\n\r\nexport const Context = React.createContext<IC>(null);\r\nexport const CartContext = React.createContext(null);\r\nexport const FilterContext = React.createContext<IFC>(null);\r\nexport const ProductContext = React.createContext(null);\r\n","import { useLocation } from \"react-router\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useLocationChange = (action) => {\r\n  const location = useLocation();\r\n  useEffect(() => {\r\n    action(location);\r\n  }, [location, action]);\r\n};\r\n\r\nexport default useLocationChange;\r\n","export default __webpack_public_path__ + \"static/media/shopping-cart-white.61bc96f9.svg\";","import React, { FC, useContext } from \"react\";\r\nimport { CartContext } from \"../../Context\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DOMPurify from \"dompurify\";\r\nimport { IMapProduct } from \"../../types/types\";\r\n\r\ninterface HCIProps {\r\n  product: IMapProduct;\r\n}\r\n\r\nconst HeaderCartItem: FC<HCIProps> = ({ product }) => {\r\n  const { removeProduct } = useContext(CartContext);\r\n\r\n  return (\r\n    <div className=\"cart__products-item\">\r\n      <div className=\"row justify-content-between align-items-center w-100 m-0\">\r\n        <div className=\"col-8\">\r\n          <div className=\"row align-items-center\">\r\n            <div className=\"col-4\">\r\n              <img\r\n                src={product.image.src ?? \"https://via.placeholder.com/300x300\"}\r\n                alt={product.image.alt || product.image.name}\r\n                onLoad={(e) => {\r\n                  const target = e.target as HTMLImageElement;\r\n                  target.style.height = getComputedStyle(target).width;\r\n                }}\r\n                className=\"cart__products-image\"\r\n              />\r\n            </div>\r\n            <div className=\"col-8\">\r\n              <Link\r\n                className=\"cart__products-name\"\r\n                to={`/catalog/${product.id}`}\r\n              >\r\n                {product.name}\r\n                {product.qty > 1 ? ` x ${product.qty} шт.` : null}\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-3\">\r\n          <div className=\"cart__products-right\">\r\n            <p\r\n              className=\"cart__products-price\"\r\n              dangerouslySetInnerHTML={{\r\n                __html: DOMPurify.sanitize(product.price_html),\r\n              }}\r\n            />\r\n            <span\r\n              className=\"cart__products-remove\"\r\n              onClick={() => removeProduct(`${product.id}`)}\r\n            >\r\n              &times;\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HeaderCartItem;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport useLocationChange from \"../../hooks/useLocationChange\";\r\n// Images\r\nimport icon_cart_path from \"../../images/icons/shopping-cart-white.svg\";\r\n// Utils\r\nimport { price_format } from \"../../utils\";\r\n// Context\r\nimport { CartContext } from \"../../Context\";\r\nimport { Link } from \"react-router-dom\";\r\nimport HeaderCartItem from \"./HeaderCartItem\";\r\n\r\nconst HeaderCart = () => {\r\n  const [path, setPath] = useState(\"/\");\r\n  const [showCart, setShowCart] = useState(true);\r\n  const { cartMap, cartCounter, totalCart } =\r\n    useContext(CartContext);\r\n\r\n  useLocationChange((location) => {\r\n    setPath(\r\n      location.pathname !== \"/\"\r\n        ? location.pathname.split(\"/\").filter((item) => item !== \"\")[0]\r\n        : \"/\"\r\n    );\r\n  });\r\n\r\n  useEffect(() => {\r\n    setShowCart(Boolean((cartCounter > 0) && (path !== \"cart\")));\r\n  }, [path, cartCounter]);\r\n\r\n  return (\r\n    <div className=\"header__cart\">\r\n      <div className=\"header__cart-inner\">\r\n        <img src={icon_cart_path} alt=\"cart\" className=\"header__cart-icon\" />\r\n        <p>\r\n          {cartCounter > 0 ? (\r\n            <Link to=\"/cart/\" className=\"header__cart-link\">\r\n              Корзина{\" \"}\r\n            </Link>\r\n          ) : (\r\n            \"Корзина \"\r\n          )}\r\n          {showCart ? (\r\n            <span className=\"header__cart-cartCounter\">{cartCounter}</span>\r\n          ) : null}\r\n        </p>\r\n      </div>\r\n      {showCart ? (\r\n        <div className=\"header__cart-content\">\r\n          <div className=\"cart__products\">\r\n            {Object.keys(cartMap).map((key) => (\r\n              <HeaderCartItem product={cartMap[key]} key={key} />\r\n            ))}\r\n          </div>\r\n          <div className=\"cart__driver-wrapper\">\r\n            <hr className=\"cart__driver\" />\r\n          </div>\r\n          <div className=\"cart__total\">\r\n            <span className=\"cart__total-text\">Итого:</span>\r\n            <span className=\"cart__total-price\">\r\n              {price_format(totalCart)} ₽\r\n            </span>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HeaderCart;\r\n","import { Link } from \"react-router-dom\";\r\nimport HeaderCart from \"../../components/cart/HeaderCart\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"container\">\r\n        <div className=\"d-flex justify-content-between\">\r\n          <Link to=\"/catalog\" className=\"header__brand\">\r\n            Laserkids Store\r\n          </Link>\r\n          <HeaderCart />\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { useState } from \"react\";\r\n\r\ninterface IError {\r\n  status: boolean;\r\n  message: string;\r\n}\r\n\r\ntype useFetchT = (callback: () => void) => [() => void, boolean, IError];\r\n\r\nconst useFetch: useFetchT = (callback: () => void) => {\r\n  const [isLoading, setLoading] = useState(false);\r\n  const [isError, setError] = useState<IError>({\r\n    status: false,\r\n    message: \"\",\r\n  });\r\n\r\n  const fetching = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await callback();\r\n    } catch (e) {\r\n      setError({\r\n        status: true,\r\n        message: e.message,\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return [fetching, isLoading, isError];\r\n};\r\n\r\nexport default useFetch;\r\n","import WooCommerceRestApi from \"@woocommerce/woocommerce-rest-api\";\r\n\r\nconst wcApi = new WooCommerceRestApi({\r\n  url: \"https://laserkids.ru\",\r\n  consumerKey: \"ck_f630e083e201d809e9054871d305f211abc832c5\",\r\n  consumerSecret: \"cs_5c9c01c48ea9db07a9e45a55c729c5406b02ef9b\",\r\n  version: \"wc/v3\",\r\n  axiosConfig: { headers: {} },\r\n});\r\n\r\nexport default wcApi;\r\n","const Loader = () => (\r\n  <div className=\"loading-spinner\">\r\n    <div className=\"spinner-border text-default\" role=\"status\">\r\n      <span className=\"visually-hidden\">Loading...</span>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default Loader;\r\n","import DOMPurify from \"dompurify\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { CartContext } from \"../../Context\";\r\nimport useDidUpdateEffect from \"../../hooks/useDidUpdateEffect\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport wcApi from \"../../tools/wc-api\";\r\nimport { IParams } from \"../../types/types\";\r\nimport { WC_REST_API_Product } from \"../../types/wc-types\";\r\nimport Loader from \"../../ui/Loader\";\r\n// styles\r\nimport \"owl.carousel/dist/assets/owl.carousel.css\";\r\nimport \"owl.carousel/dist/assets/owl.theme.default.css\";\r\nimport ProductSlider from \"./ProductSlider\";\r\n\r\nconst ProductContent = () => {\r\n  // context\r\n  const { cartMap, calcTotal, addToCart } = useContext(CartContext);\r\n  // params\r\n  const { id } = useParams<IParams>();\r\n  // states\r\n  const [product, setProduct] = useState<WC_REST_API_Product>(null);\r\n  const [qty, setQty] = useState(1);\r\n  const [inCart, setInCart] = useState(false);\r\n  // fetch\r\n  const [fetching, isLoading] = useFetch(async () => {\r\n    const { data } = await wcApi.get(`products/${id}`);\r\n    setProduct(data);\r\n  });\r\n\r\n  useEffect(() => fetching(), [id]); // eslint-disable-line\r\n\r\n  useDidUpdateEffect(() => {\r\n    if (inCart) calcTotal(id, qty);\r\n  }, [qty]);\r\n\r\n  useEffect(() => {\r\n    const cartKeys = Object.keys(cartMap);\r\n    if (cartKeys.length && cartKeys.includes(id)) setQty(cartMap[id].qty);\r\n    setInCart(cartKeys.includes(id));\r\n  }, [cartMap, id]);\r\n\r\n  return (\r\n    <>\r\n      {!isLoading && product !== null ? (\r\n        <>\r\n          <div className=\"product-wrapper\">\r\n            <div className=\"row\">\r\n              <div className=\"col-5\">\r\n                <ProductSlider images={product.images} />\r\n              </div>\r\n              <div className=\"col-7\">\r\n                <div className=\"product-body\">\r\n                  <p className=\"product-name\">{product.name}</p>\r\n                  <p\r\n                    className=\"product-price\"\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: DOMPurify.sanitize(product.price_html),\r\n                    }}\r\n                  />\r\n                  <div className=\"product__add-cart\">\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control product-qty\"\r\n                      value={qty}\r\n                      onChange={(e) => setQty(parseInt(e.target.value))}\r\n                    />\r\n                    {inCart ? (\r\n                      <span className=\"product__cart cart_added\">\r\n                        В корзине &#10004;\r\n                      </span>\r\n                    ) : (\r\n                      <span\r\n                        className=\"product__cart\"\r\n                        onClick={() => {\r\n                          addToCart(product, qty);\r\n                          setInCart(true);\r\n                        }}\r\n                      >\r\n                        В корзину\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <p>\r\n                    <span>\r\n                      {product.categories.length > 1\r\n                        ? \"Категории: \"\r\n                        : \"Категория: \"}\r\n                    </span>\r\n                    <span className=\"product-categories\">\r\n                      {product.categories.map((item, ind) => {\r\n                        return ind + 1 !== product.categories.length\r\n                          ? `${item.name}, `\r\n                          : `${item.name}`;\r\n                      })}\r\n                    </span>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {product.description ? (\r\n            <div className=\"product-wrapper\">\r\n              <div\r\n                className=\"product-description\"\r\n                dangerouslySetInnerHTML={{ __html: product.description }}\r\n              ></div>\r\n            </div>\r\n          ) : null}\r\n        </>\r\n      ) : (\r\n        <Loader />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductContent;\r\n","// images\r\nimport call from \"../../images/phone-call.png\";\r\nimport whatsapp from \"../../images/whatsapp.png\";\r\nimport email from \"../../images/email.png\";\r\n\r\nconst TextWidget = () => {\r\n  return (\r\n    <div className=\"text-widget text-widget__contacts\">\r\n      <p>\r\n        <span className=\"text-widget__img\">\r\n          <img src={call} alt=\"phone-call\" />\r\n        </span>\r\n\r\n        <a href=\"tel:+79603621543\">+7 (960) 362 1543</a>\r\n      </p>\r\n      <p>\r\n        <span className=\"text-widget__img\">\r\n          <img src={whatsapp} alt=\"whatsapp\" />\r\n        </span>\r\n\r\n        <a href=\"https://wa.me/79603621543\" target=\"_blank\" rel=\"noreferrer\">\r\n          +7 (960) 362 1543\r\n        </a>\r\n      </p>\r\n      <p>\r\n        <span className=\"text-widget__img\">\r\n          <img src={email} alt=\"email\" />\r\n        </span>\r\n\r\n        <a href=\"mailto:laserkid@yandex.ru\" target=\"_blank\" rel=\"noreferrer\">\r\n          laserkid@yandex.ru\r\n        </a>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextWidget;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYEAYAAACw5+G7AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAB3RJTUUH5QoKEBsa5yJJxAAABF5JREFUWMPNl3tMU2cYxp+3tDAuA1niGC2ijLExUMe4jGWyZGQYCS04QSqCMpxZqo5dYEtA5SoyYCJVRjYRmDpx0Qo2gwoyXBaRBHVAMghudtJFWCkjJlwk5db22x9SdjGkBVzZ89dJTp7nPL/vOyffewj/0nOlpeENShsbrVJ3jXWVldEEXsKncXFMil6sVKlYCE6ydcnJmq7ULaLi69exzCLjhY8sm8kuWFuPXnB6x764pgY3sA45kZGPOB7AiiQTE0xEmYYvo6IGvkkZE0VevbpcABzjio8EOSntk+TyeYsb9ST0rNzWlhQsj7O3ro4fL3VU1IeFLRuA9mt9DzuWnk4huIyaiAiznbMgyGDv0pRCIYiSJig0QqHFAaiTTVF5QsJiA2gjBLC1scFK1kvC8+cF75eGNyjd3CwGgEq8wU67uCw56QrEyHNwMGTrRKwqIMByAGpw8bJavdQgdhhtKJqZ4fnTAfZ6d7flAIJYLnuxrW3RxYtwHy+oVJwu9DPNtm19fSljIpFKZTmAcUxb7aitXXDxJIyhr72dlzCab+fp6/u7NPWG6Fe53FLF5wDUW1f1PNjS1MTa4IgDd++aa6QTCCNpVdU9yqVQmpy0dPE5AEAsFov1ejaFSnQVFprtDEc/+0IgWK7ifwN4KI3XaJud4cwZJKKDKjs7TTqfQgCmd+40HoTLDgDkUijpdJwV2IseiQTRkMFDr5/XeQkKsNWrtdO6Efjl5PwPAB6qPy01JELZ3s78yZM+yM01FUAy9LOktDT++pIjih1xcYst8syuYr8GpY+PgH+0WFEfG+tafnxFvb+7+4IBjBrYNVJ9szk/n32FQ/i+sXHeBDU+hpAIrXSQrE6dckspebXBLj7e3OKCDUerGtISE61GOAexqbsbRBziyGScW3pvDnp6TM1aZOoB7u4FBQqFs7Puc+tkCm9poX1Ugaa1a002G0YvvS2VGqT26/XuGRkaiUQS2anVGm8/61FY0Pydk9NkvY10JvP2bdrE0lkWn/9Ijonp1ySAUauKin759jU+3+DJ8+JNtrbiQxxneR4epnysAn+gUaOhIRZHg+fOsTJOFHt6fHxuBnNFOqvz8jJZYBbEMGTYx+SbN2ue+IQnDGpuNhtgDiT0s8kGpaen4T0uD3HNzeaCPDbNgtAdzhg7Fh6+YIA5kNkd0XtzBdyWpiazX63HJPYzClDa1bVoAKPmvpFrNtEUW1294P+KxQJkQgK7wUHOUoP6+vbvF4mGhwc8Rp+/pY2MZIepg6RZWSbPkSWKNuAeHM6eXfIOzCe+TMoub/Xzw08sF29WVNBpOMI9MHCpuUyOGPxWW+u6x77RJXj79v8M4C9lsx8YlysQO17UfrR7N4LpEkbT01GCVxC7Zs1ii3d0SvYEBs3MWADgnwrwLz/R/iOPNyDRSoZOCoXkyu7jZkwMvQVf9AQHwxtc1i4QsCs4hKSBAbqDaHhVVak3jjrbXSwuNo48xrw/AeIx3Jud3VH5AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTEwLTEwVDE2OjI3OjI2KzAwOjAwX9pcYwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMS0xMC0xMFQxNjoyNzoyNiswMDowMC6H5N8AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAMrSURBVEiJrZZfaFt1FMc/55emydbV3IamUp06ttkYROdsU9wQt8L61o4ksIIw4oOoCIKCLxaZ+OfBh8EQ3waCFEVrC00LgogPKTJBSBvbMq1OZDhsH5rOBZvRLmnu8cE2velyu6b4fbq/cw7f7zm/e885V1QVNyRSibaiSlSM3QV0CnQBKEwB02qbqUbRzFh8bMmNQ2oJ9Ez2NDTlrUEDFxS8rhkAAiUbPrht5T9Mn06v31OgL5WIiOgQEN2JuAYyqvLC1/GxeafROA/9E7GkGDu7B3KAqBg72z8RSzqNlQr6UomIGDuLin8P5E7GNbXN05uVGPjvzkV0yEn+0IGDxA6fJegP1ieg4hfRoZ7JnoaKQFPeGsRxLeGWDi49d5Fk5DwXooN7qSO6wYln7thcmwoTgGfTm4yc59B9jwBg+Sxml+dYXrtZl4KBZ0fnRy6bokp0+6cYaQlXBfc+fKbuEhS8RZWo2WiiKty6k68OVrtuAQAxdpcBOrc7ZnKzlee/127xyS+f7kkA6DSb7e/E94tXKGt546R4zY7N7AqBLlNrFCwUFhj7YxyAoD/Im8ffwIi5i2A3MMCvtRzD10b4KTcDwJOtT/DS4y/iEU9VTHNjM5bPciVXmPJ0PB8+AXLXewCYXsoSbesk4Atw1DrCifZnuLFyg9zqMu1N7Xx86hKxw2cJ7W/lr8IihVJhO8WX0peKvQ585JZFc2Mzb0ffosN6tGKbyc1y8MCDtO5rrdjKWubV9Gssr271i9qmz3hVPgdW3ARWiiu8++P7fPvnd2zOradCx6rIATzioVC6XTkLlBpFM5754fnVL34b9gtyyk1kXctML2WZXsryQFM7oX0hRKQq5qvfR5nNzW1lD+9NxFPfiKrSOzoQ8HtL14EWNxEnLF+A7vujRIKPcadc5MriD1y9+bMzJFOw8ifTp9PrW+N6PH5d4NBuBHZErXHdPx7v/r/IgVecW60BQGDAffXvGhm1Te2VqXAOyAOfIZoow1FELwL/3DNpKCm8U7DyJ7eTA8iZkXOB/Q3r3Qu50OTUy5dLTmfv6EDA5y0lReU4omEgLFCs57flX0EkMkeNoDLGAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYEAYAAACw5+G7AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAB3RJTUUH5QoKEB8oS5ndQAAAAv1JREFUWMPtl11IU2EYx//POU4ktShEp9tACzSZepMaGkoYhZFgfpIEfgx1KhlEpFSEelGkIhKSmR9bRiTMJIUsyIrIStQUdBMDK8S5nCKo4MVqbm83ngXJIHV4Cvzdnfdw3uf3f57D4bzALrtsC1JUt1XPXImMtCXSMlVqNFQJFXqVSgyhHzEcJ7agg2jEYcBuZ+0IRqjBwEI4rX2vSkUBPZqlWT+9nkrwlH0KCxPb829hzzGFA3o9RzUkZ3elUrGFNgvdxmE0SaUcvHCRPOvrxRbaNCHwpJX6ehKuZQFazawxIwNBKGWDjY2YZg046uMjtqcAewIzJSwvkwH3EF9ebipQGeVtzc2cLFubP/tAq3UzIc8q7+tb28N/lXgrlewpPYShq0tscSxQJ3S9vfw7xtvPKpVu+TRjbdXpBG8Or1ksO5Gba73PrknOTE5y6TY/69XY2O/ReW8Vp9PTwQiEzEwEUikGFxd3qtOoRAVVqtUma94LxeWkJGbmykgaEbG2H7zbqF4veJNMptEYjYxt3AkVqOjsZJ/5O5yuuNiWRrF8F8/zN23nrPbGRkph2QhLS3N1p+kCZwLUavduS8nP5NVVyyPJefeemhrKRCcyCwv/fMz5d55QhaqMDDy2DbN4g8HVk3HWacA+BoSH/1hyL3FfMRiciTs0nU7AaeVtTmaLnXZdACHHDUyR2mxmRLeYubh4Tp1HitHubn+j5ojxWFYWlwp/pJaVIYje4wtj9jp2COO1tXMK1YjiQ0eH/JKWGesSE5kWPI63tMCTtcJXLt+sx5YDbECKASS3t1v32UqtReXlC28KIg4Wzs8Lt30TWsa/Nfv5SVb4BklTdTXMiEFPTs52y7ougDCZSaxSoMVC/RjAqeFhx3ocYvAyKopC4cWmPTxcVc/NVRs5OvJb8CQQF+dYd3Whdf6dv80tB5ChDS58hXaMdW+OXcczSpmYENtns7BX+AhvvZ5jRVyPbSg3FxYEY2RsTDg4iC24AcFr3VM40Iittct/zy/zh3+SYYcCLwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0xMC0xMFQxNjozMTo0MCswMDowMDb1z1kAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMTAtMTBUMTY6MzE6NDArMDA6MDBHqHflAAAAAElFTkSuQmCC\"","import { Link } from \"react-router-dom\";\r\n\r\nconst NavWidget = () => {\r\n  return (\r\n    <nav className=\"nav-widget\">\r\n      <ul className=\"nav-widget__list\">\r\n        <li className=\"nav-widget__item\">\r\n          <Link to=\"/catalog/\">Каталог</Link>\r\n        </li>\r\n        {/* <li className=\"nav-widget__item\">\r\n          <Link to=\"/cart/\">Корзина</Link>\r\n        </li> */}\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default NavWidget;\r\n","import TextWidget from \"../../components/widgets/TextWidget\";\r\nimport NavWidget from \"../../components/widgets/NavWidget\";\r\n\r\nconst Sidebar = () => {\r\n  return (\r\n    <div className=\"sidebar-wrapper\">\r\n      <div className=\"sidebar-block\">\r\n        <NavWidget />\r\n      </div>\r\n      <div className=\"sidebar-block\">\r\n        <TextWidget />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n","import ProductContent from \"../components/product/ProductContent\";\r\nimport Sidebar from \"../ui/sidebar/Sidebar\";\r\n\r\nconst Product = () => {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row justify-content-start\">\r\n        <div className=\"col-3\">\r\n          <Sidebar />\r\n        </div>\r\n        <div className=\"col-8 single-product\">\r\n          <ProductContent />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","export default __webpack_public_path__ + \"static/media/delete.e4efcb06.svg\";","export default __webpack_public_path__ + \"static/media/delete-red.0a2da310.svg\";","import { FC, MouseEvent, useContext, useEffect, useState } from \"react\";\r\nimport trash from \"../../images/icons/delete.svg\";\r\nimport trash_h from \"../../images/icons/delete-red.svg\";\r\n// Utils\r\nimport { Link } from \"react-router-dom\";\r\nimport { price_format } from \"../../utils\";\r\nimport { CartContext } from \"../../Context\";\r\nimport { IMapProduct } from \"../../types/types\";\r\nimport DOMPurify from \"dompurify\";\r\n\r\ninterface CIProps {\r\n  product: IMapProduct;\r\n}\r\n\r\ntype RPT = (id: string) => void;\r\ntype CTT = (id: string, qty: number) => void;\r\n\r\nconst CartItem: FC<CIProps> = ({ product }) => {\r\n  const [qty, setQty] = useState(product.qty);\r\n  const { removeProduct, calcTotal }: { removeProduct: RPT; calcTotal: CTT } =\r\n    useContext(CartContext);\r\n\r\n  useEffect(() => {\r\n    calcTotal(`${product.id}`, qty);\r\n  }, [qty]); // eslint-disable-line\r\n\r\n  return (\r\n    <tr>\r\n      <td className=\"cart__content-img\">\r\n        <img\r\n          src={product.image.src ?? \"https://via.placeholder.com/300x300\"}\r\n          alt={product.image.alt || product.image.name}\r\n          onLoad={(e) => {\r\n            const target = e.target as HTMLImageElement;\r\n            target.style.height = getComputedStyle(target).width;\r\n          }}\r\n        />\r\n      </td>\r\n      <td className=\"cart__content-name\">\r\n        <Link to={`/catalog/${product.id}`}>{product.name}</Link>\r\n      </td>\r\n      <td\r\n        className=\"cart__content-price\"\r\n        dangerouslySetInnerHTML={{\r\n          __html: DOMPurify.sanitize(product.price_html),\r\n        }}\r\n      ></td>\r\n      <td className=\"cart__content-qty\">\r\n        <input\r\n          type=\"number\"\r\n          className=\"form-control\"\r\n          min=\"1\"\r\n          max=\"10\"\r\n          value={qty}\r\n          onChange={(e) => setQty(parseInt(e.target.value))}\r\n        />\r\n      </td>\r\n      <td className=\"cart__content-total\">\r\n        {price_format(product.total)}\r\n        {\" ₽\"}\r\n      </td>\r\n      <td className=\"cart__content-remove\">\r\n        <img\r\n          src={trash}\r\n          alt=\"move-to-trash\"\r\n          onClick={() => removeProduct(`${product.id}`)}\r\n          onMouseEnter={(e: MouseEvent<HTMLImageElement>) => {\r\n            const target = e.target as HTMLImageElement;\r\n            target.setAttribute(\"src\", trash_h);\r\n          }}\r\n          onMouseLeave={(e: React.MouseEvent<HTMLImageElement>) => {\r\n            const target = e.target as HTMLImageElement;\r\n            target.setAttribute(\"src\", trash);\r\n          }}\r\n        />\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default CartItem;\r\n","import { CartContext } from \"../Context\";\r\nimport { useContext } from \"react\";\r\nimport CartItem from \"../components/cart/CartItem\";\r\nimport { price_format } from \"../utils\";\r\nimport Sidebar from \"../ui/sidebar/Sidebar\";\r\n// import Checkout from \"../components/checkout/Checkout\";\r\n\r\nconst sizes_td = [\"11%\", \"45%\", \"13%\", \"12%\", \"13%\", \"6%\"];\r\n\r\nconst Colgroup = () => (\r\n  <colgroup>\r\n    {sizes_td.map((item, ind) => (\r\n      <col style={{ width: item }} key={ind} />\r\n    ))}\r\n  </colgroup>\r\n);\r\n\r\nconst THead = () => (\r\n  <thead className=\"cart__content-head\">\r\n    <tr>\r\n      <td>Фото</td>\r\n      <td>Наименование товара</td>\r\n      <td>Цена</td>\r\n      <td>Кол-во</td>\r\n      <td>Стоимость</td>\r\n      <td>&nbsp;</td>\r\n    </tr>\r\n  </thead>\r\n);\r\n\r\nconst TBody = ({ cartMap }) => (\r\n  <tbody className=\"cart__content-body\">\r\n    {Object.keys(cartMap).length\r\n      ? Object.keys(cartMap).map((key, ind) => (\r\n          <CartItem product={cartMap[key]} key={key} />\r\n        ))\r\n      : null}\r\n  </tbody>\r\n);\r\n\r\nconst TFoot = ({ totalCart }) => (\r\n  <tfoot className=\"cart__content-foot\">\r\n    <tr className=\"cart__content-result\">\r\n      <td colSpan={4}>Итого:</td>\r\n      <td>\r\n        {price_format(totalCart)}\r\n        {\" ₽\"}\r\n      </td>\r\n      <td>&nbsp;</td>\r\n    </tr>\r\n  </tfoot>\r\n);\r\n\r\nconst Cart = () => {\r\n  const { cartMap, totalCart } = useContext(CartContext);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row justify-content-center\">\r\n        <div className=\"col-3\">\r\n          <Sidebar />\r\n        </div>\r\n        <div className=\"col-9 d-flex flex-column\" style={{ gap: \"30px 0\" }}>\r\n          {/* <h2 className=\"cart__title\">Корзина</h2> */}\r\n          <section className=\"cart__wrapper\">\r\n            <table className=\"cart__content\">\r\n              <Colgroup />\r\n              <THead />\r\n              <TBody cartMap={cartMap} />\r\n              <TFoot totalCart={totalCart} />\r\n            </table>\r\n          </section>\r\n          {/* <Checkout /> */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import { useState, useContext, useEffect, FC } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { CartContext } from \"../../Context\";\r\nimport { WC_REST_API_Product } from \"../../types/wc-types\";\r\nimport DOMPurify from \"dompurify\";\r\n\r\ninterface PIProps {\r\n  product: WC_REST_API_Product;\r\n}\r\n\r\nconst ProductItem: FC<PIProps> = ({ product }) => {\r\n  const [inCart, setInCart] = useState(false);\r\n  const { cartMap, addToCart } = useContext(CartContext);\r\n  const { push } = useHistory();\r\n\r\n  useEffect(() => {\r\n    setInCart(Object.keys(cartMap).includes(String(product.id)));\r\n  }, [cartMap, product.id]);\r\n\r\n  return (\r\n    <div className=\"col-12 col-sm-6 col-md-12 col-lg-6 col-xl-4\">\r\n      <div className=\"product__wrapper\">\r\n        <img\r\n          src={product.images[0].src ?? \"https://via.placeholder.com/300x300\"}\r\n          alt={product.images[0].alt || product.images[0].name}\r\n          onLoad={(e) => {\r\n            const target = e.target as HTMLImageElement;\r\n            target.style.height = getComputedStyle(target).width;\r\n          }}\r\n        />\r\n        <div className=\"product__body\">\r\n          <p\r\n            className=\"product__name\"\r\n            onClick={() => push(`/catalog/${product.id}`)}\r\n          >\r\n            {product.name}\r\n          </p>\r\n          <p\r\n            className=\"product__cost\"\r\n            dangerouslySetInnerHTML={{\r\n              __html: DOMPurify.sanitize(product.price_html),\r\n            }}\r\n          />\r\n\r\n          {inCart ? (\r\n            <span className=\"product__cart cart_added\">В корзине &#10004;</span>\r\n          ) : (\r\n            <span\r\n              className=\"product__cart\"\r\n              onClick={() => {\r\n                addToCart(product);\r\n                setInCart(true);\r\n              }}\r\n            >\r\n              В корзину\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductItem;\r\n","import ProductItem from \"./ProductItem\";\r\nimport { Context } from \"../../Context\";\r\nimport { useContext } from \"react\";\r\nimport { WC_REST_API_Products } from \"../../types/wc-types\";\r\n\r\n// TODO: Нашел баг / не доработку - при поиске не меняеться фильтрация цен \r\n\r\nconst ProductList = () => {\r\n  const { products }: { products: WC_REST_API_Products } = useContext(Context);\r\n\r\n  return (\r\n    <div className=\"row\" style={{ gap: \"15px 0\" }}>\r\n      {products.length ? (\r\n        products.map((product) => {\r\n          return <ProductItem key={product.id} product={product} />;\r\n        })\r\n      ) : (\r\n        <p className=\"produst__not-found\">\r\n          Мы не смогли найти подходящих товаров для вас! Попробуйте поменять\r\n          настройки фильтра\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductList;\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport { AppDispatch, RootState } from \"../store/\";\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;","export type OrderbyType = \"asc\" | \"desc\" | \"default\";\r\n\r\nexport const OrderbyEnum = {\r\n  asc: \"asc\" as OrderbyType,\r\n  desc: \"desc\" as OrderbyType,\r\n  default: \"default\" as OrderbyType,\r\n} as const;\r\n","import { OrderbyEnum, OrderbyType } from \"./../../types/enums\";\r\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\n\r\ninterface IState {\r\n  category: number;\r\n  maxCost: number;\r\n  orderby: OrderbyType;\r\n  searchQuery: string;\r\n}\r\n\r\nconst initialState: IState = {\r\n  category: -1,\r\n  maxCost: 0,\r\n  orderby: OrderbyEnum.default,\r\n  searchQuery: \"\",\r\n};\r\n\r\nexport const FilterSlice = createSlice({\r\n  name: \"goods\",\r\n  initialState,\r\n  reducers: {\r\n    setCategory(state, action: PayloadAction<number>) {\r\n      state.category = action.payload;\r\n    },\r\n    setMaxCost(state, action: PayloadAction<number>) {\r\n      state.maxCost = action.payload;\r\n    },\r\n    setOrderby(state, action: PayloadAction<OrderbyType>) {\r\n      state.orderby = action.payload;\r\n    },\r\n    setSearchQuery(state, action: PayloadAction<string>) {\r\n      state.searchQuery = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const FilterReducer = FilterSlice.reducer;\r\nexport const { setCategory, setMaxCost, setOrderby, setSearchQuery } =\r\n  FilterSlice.actions;\r\n","import { Context, FilterContext } from \"../../../Context\";\r\nimport {\r\n  useState,\r\n  useContext,\r\n  useEffect,\r\n  ChangeEvent,\r\n  MouseEvent,\r\n} from \"react\";\r\nimport { calc_min_max } from \"../../../utils\";\r\nimport { useAppDispatch } from \"../../../store/redux\";\r\nimport { setMaxCost } from \"../../../store/reducers/FilterReducer\";\r\n\r\nconst FilterRange = () => {\r\n  // redux\r\n  const dispatch = useAppDispatch();\r\n  // state\r\n  const [minRange, setMinRange] = useState(0);\r\n  const [maxRange, setMaxRange] = useState(0);\r\n  const [currentRange, setCurrentRange] = useState(0);\r\n  // context\r\n  const { sortedPosts } = useContext(FilterContext);\r\n  const { category } = useContext(Context);\r\n\r\n  useEffect(() => {\r\n    if (sortedPosts.length) {\r\n      const min_max = calc_min_max(sortedPosts);\r\n\r\n      setMinRange(min_max[0]);\r\n      setMaxRange(min_max[1]);\r\n      setCurrentRange(min_max[1]);\r\n\r\n      dispatch(setMaxCost(min_max[1]));\r\n    }\r\n  }, [category, sortedPosts]); // eslint-disable-line\r\n\r\n  const onInputHandler = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setCurrentRange(parseInt(e.target.value));\r\n  };\r\n\r\n  const onMouseUpHandler = (e: MouseEvent<HTMLInputElement>) => {\r\n    const target = e.target as HTMLInputElement;\r\n    dispatch(setMaxCost(parseInt(target.value)));\r\n  };\r\n\r\n  return (\r\n    <div className=\"main__filter-block\">\r\n      <p className=\"filter-item__title\">Стоимость</p>\r\n      <div className=\"filter-item__content\">\r\n        <div className=\"d-flex flex-column w-100\">\r\n          <input\r\n            type=\"range\"\r\n            className=\"form-range\"\r\n            min={minRange}\r\n            max={maxRange}\r\n            value={currentRange}\r\n            step=\"50\"\r\n            onInput={onInputHandler}\r\n            onMouseUp={onMouseUpHandler}\r\n          />\r\n          <p className=\"filter-item__by-cost\">\r\n            Цена: <span className=\"min-cost\">{minRange}</span> ₽ —{\" \"}\r\n            <span className=\"max-cost\">{currentRange}</span> ₽\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterRange;\r\n","import { Context } from \"../../../Context\";\r\nimport { useContext } from \"react\";\r\nimport { WC_REST_API_Categories } from \"../../../types/wc-types\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../store/redux\";\r\nimport { setCategory } from \"../../../store/reducers/FilterReducer\";\r\n\r\nconst FilterCategory = () => {\r\n  //redux\r\n  const dispatch = useAppDispatch();\r\n  // context\r\n  const { categories }: { categories: WC_REST_API_Categories } =\r\n    useContext(Context);\r\n  // store\r\n  const { category } = useAppSelector((store) => store.FilterReducer);\r\n\r\n  return (\r\n    <div className=\"main__filter-block\">\r\n      <p className=\"filter-item__title\">Категории</p>\r\n      <div className=\"filter-item__content\">\r\n        <select\r\n          className=\"form-select\"\r\n          value={category}\r\n          onChange={(e) => dispatch(setCategory(parseInt(e.target.value)))}\r\n        >\r\n          <option value={-1}>Выбрать категорию</option>\r\n          {categories.map((category) => {\r\n            return (\r\n              category.count !== 0 && (\r\n                <option value={category.id} key={category.id}>\r\n                  {category.name}\r\n                </option>\r\n              )\r\n            );\r\n          })}\r\n        </select>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterCategory;\r\n","import { Context } from \"../../../Context\";\r\nimport { ChangeEvent, useContext } from \"react\";\r\nimport { setOrderby } from \"../../../store/reducers/FilterReducer\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../store/redux\";\r\nimport { OrderbyEnum } from \"../../../types/enums\";\r\n\r\nconst FilterOrderby = () => {\r\n  // redux\r\n  const dispatch = useAppDispatch();\r\n  // store\r\n  const { orderby } = useAppSelector((store) => store.FilterReducer);\r\n  const { products } = useContext(Context);\r\n\r\n  if (products.length < 2) return null;\r\n\r\n  const changeOrderby = (e: ChangeEvent<HTMLSelectElement>) => {\r\n    dispatch(setOrderby(OrderbyEnum[e.target.value]));\r\n  };\r\n\r\n  return (\r\n    <div className=\"main__filter-block\">\r\n      <p className=\"filter-item__title\">Сортировка</p>\r\n      <div className=\"filter-item__content\">\r\n        <select\r\n          className=\"form-select\"\r\n          value={orderby}\r\n          onChange={changeOrderby}\r\n        >\r\n          <option value=\"default\">По умолчанию</option>\r\n          <option value=\"asc\">По возрастанию</option>\r\n          <option value=\"desc\">По убыванию</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterOrderby;\r\n","import { ChangeEvent } from \"react\";\r\nimport { setSearchQuery } from \"../../../store/reducers/FilterReducer\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../store/redux\";\r\n\r\nconst FilterSearch = () => {\r\n  const dispatch = useAppDispatch();\r\n  // store\r\n  const { searchQuery } = useAppSelector((store) => store.FilterReducer);\r\n\r\n  return (\r\n    <div className=\"main__filter-block\">\r\n      <p className=\"filter-item__title\">Поиск</p>\r\n      <div className=\"filter-item__content\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={searchQuery}\r\n          onInput={(e: ChangeEvent<HTMLInputElement>) =>\r\n            dispatch(setSearchQuery(e.target.value))\r\n          }\r\n          placeholder=\"Введите запрос\"\r\n        />\r\n        {searchQuery && (\r\n          <span\r\n            className=\"clear-search\"\r\n            onClick={() => dispatch(setSearchQuery(\"\"))}\r\n          >\r\n            &times;\r\n          </span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterSearch;\r\n","import {\r\n  setCategory,\r\n  setOrderby,\r\n  setSearchQuery,\r\n} from \"../../../store/reducers/FilterReducer\";\r\nimport { useAppDispatch } from \"../../../store/redux\";\r\nimport { OrderbyEnum } from \"../../../types/enums\";\r\n\r\nconst ClearFilter = () => {\r\n  const dispatch = useAppDispatch();\r\n  \r\n  const ClearFilter = () => {\r\n    dispatch(setCategory(-1));\r\n    dispatch(setOrderby(OrderbyEnum.default));\r\n    dispatch(setSearchQuery(\"\"));\r\n  };\r\n\r\n  return (\r\n    <button className=\"btn btn-default\" onClick={ClearFilter}>\r\n      Сбросить\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default ClearFilter;\r\n","import FilterRange from \"./blocks/FilterRange\";\r\nimport FilterCategory from \"./blocks/FilterCategory\";\r\nimport FilterOrderby from \"./blocks/FilterOrderby\";\r\nimport FilterSearch from \"./blocks/FilterSearch\";\r\nimport ClearFilter from \"./blocks/ClearFilter\";\r\n// CSS\r\nimport \"./product_filter.scss\";\r\n\r\nconst ProductsFilter = () => {\r\n  return (\r\n    <div className=\"main__filter\">\r\n      <FilterSearch />\r\n      <FilterCategory />\r\n      <FilterRange />\r\n      <FilterOrderby />\r\n      <ClearFilter />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductsFilter;\r\n","import { useMemo } from \"react\";\r\nimport {\r\n  sortByCategory,\r\n  sortByCost,\r\n  sortByOrderby,\r\n  searchByQuery,\r\n} from \"../utils\";\r\n\r\nexport const useSortedByCategoryProducts = (category, products) => {\r\n  const sortedPosts = useMemo(() => {\r\n    return sortByCategory(category, [...products]);\r\n  }, [category, products]);\r\n\r\n  return sortedPosts;\r\n};\r\n\r\nexport const useSortedByCostProducts = (maxCost, products) => {\r\n  const sortedByCost = useMemo(() => {\r\n    return maxCost !== 0 ? sortByCost(maxCost, [...products]) : products;\r\n  }, [maxCost, products]);\r\n\r\n  return sortedByCost;\r\n};\r\n\r\nexport const useSortedByOrderbyProducts = (orderby, products) => {\r\n  const sortedByOrderby = useMemo(() => {\r\n    return sortByOrderby(orderby, [...products]);\r\n  }, [orderby, products]);\r\n\r\n  return sortedByOrderby;\r\n};\r\n\r\nexport const useSortedBySearchProducts = (query, products) => {\r\n  const filtredPosts = useMemo(() => {\r\n    return searchByQuery(query, [...products]);\r\n  }, [query, products]);\r\n\r\n  return filtredPosts;\r\n};\r\n\r\n// Полная фильтрация\r\nexport const useProducts = (category, maxCost, orderby, query, products) => {\r\n  const byCategory = useSortedByCategoryProducts(category, products);\r\n  const byMaxCost = useSortedByCostProducts(maxCost, byCategory);\r\n  const byOrderby = useSortedByOrderbyProducts(orderby, byMaxCost);\r\n  const bySearch = useSortedBySearchProducts(query, byOrderby);\r\n\r\n  return bySearch;\r\n};\r\n","import React, { FC } from \"react\";\r\nimport { useAppSelector } from \"../../store/redux\";\r\nimport { fillArrayFromTo } from \"../../utils\";\r\n\r\ninterface IPagination {\r\n  page: number;\r\n  setPage: (page: number) => void;\r\n}\r\n\r\nconst Pagination: FC<IPagination> = ({ page, setPage }) => {\r\n  const { total } = useAppSelector((store) => store.GoodsReducer);\r\n\r\n  if (total === 1) return null;\r\n  \r\n  const list = fillArrayFromTo(1, total);\r\n\r\n  return (\r\n    <div className=\"pagination_list\">\r\n      {list.map((item) => (\r\n        <span\r\n          className={`pagination_item${item === page ? \" current_page\" : \"\"}`}\r\n          onClick={() => setPage(item)}\r\n          key={item}\r\n        >\r\n          {item}\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import { WC_REST_API_Categories } from \"./../types/wc-types\";\r\nimport axios, { AxiosError } from \"axios\";\r\nimport wcApi from \"../tools/wc-api\";\r\n\r\nexport default class ProductService {\r\n  static async getCategories(\r\n    callback: (categories: WC_REST_API_Categories) => void\r\n  ) {\r\n    try {\r\n      let categories: WC_REST_API_Categories = [];\r\n      let totalPages = 1;\r\n\r\n      const read_categories = async (page = 1) => {\r\n        const {\r\n          data,\r\n          headers,\r\n        }: { data: WC_REST_API_Categories; headers: any } = await wcApi.get(\r\n          \"products/categories\",\r\n          {\r\n            page,\r\n          }\r\n        );\r\n\r\n        categories = [...categories, ...data];\r\n        totalPages = parseInt(headers[\"x-wp-totalpages\"]) ?? 1;\r\n\r\n        if (page < totalPages) {\r\n          read_categories(page + 1);\r\n        } else {\r\n          callback(categories);\r\n        }\r\n      };\r\n\r\n      await read_categories();\r\n    } catch (err) {\r\n      const e = err as AxiosError;\r\n      console.error(e.message);\r\n      throw new Error(e.message);\r\n    }\r\n  }\r\n\r\n  static getProducts = async () => {\r\n    let products = [];\r\n    let page = 1;\r\n    let isNext = true;\r\n\r\n    while (isNext) {\r\n      const { headers, data } = await axios.get(\r\n        \"https://laserkids.ru/wp-json/wc/store/products?page=\" + page\r\n      );\r\n\r\n      products = [...products, ...data];\r\n      const total = headers[\"x-wp-totalpages\"] ?? 1;\r\n\r\n      isNext = page < total;\r\n      page++;\r\n    }\r\n\r\n    return products;\r\n  };\r\n\r\n  static getWcProducts(limit: number, page: number = 1) {}\r\n\r\n  static getProductById = async (id: number) => {\r\n    const res = await axios.get(\r\n      \"https://laserkids.ru/wp-json/wc/store/products/?include=\" + id\r\n    );\r\n\r\n    return res.data[0];\r\n  };\r\n}\r\n","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport wcApi from \"../../tools/wc-api\";\r\nimport { WC_REST_API_Products } from \"../../types/wc-types\";\r\n\r\nexport interface IFetchGoods {\r\n  goods: WC_REST_API_Products;\r\n  total: number;\r\n}\r\n\r\nexport const fetchGoods = createAsyncThunk(\r\n  \"goods/fetchGoods\",\r\n  async (\r\n    { limit, page }: { limit: number; page: number },\r\n    { rejectWithValue, signal }\r\n  ) => {\r\n    try {\r\n      const { data, headers } = await wcApi.get(\"products\", {\r\n        per_page: limit,\r\n        page,\r\n        signal,\r\n      });\r\n\r\n      return {\r\n        goods: data,\r\n        total: parseInt(headers[\"x-wp-totalpages\"]),\r\n      };\r\n    } catch (e) {\r\n      console.error(e);\r\n      return rejectWithValue(\"\");\r\n    }\r\n  }\r\n);\r\n\r\ninterface IState {\r\n  goods: WC_REST_API_Products;\r\n  total: number;\r\n  isLoading: boolean;\r\n  errorText: string;\r\n}\r\n\r\nconst initialState: IState = {\r\n  goods: [],\r\n  total: 0,\r\n  isLoading: true,\r\n  errorText: \"\",\r\n};\r\n\r\nexport const GoodsSlice = createSlice({\r\n  name: \"goods\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder.addCase(\r\n      fetchGoods.fulfilled.type,\r\n      (state, action: PayloadAction<IFetchGoods>) => {\r\n        state.goods = action.payload.goods;\r\n        state.total = action.payload.total;\r\n        state.errorText = \"\";\r\n        state.isLoading = false;\r\n      }\r\n    );\r\n    builder.addCase(fetchGoods.rejected.type, (state) => {\r\n      state.errorText = \"При загрузке произошла ошибка!\";\r\n      state.isLoading = false;\r\n    });\r\n  },\r\n});\r\n\r\nexport const GoodsReducer = GoodsSlice.reducer;\r\n// export const { } = GoodsSlice.actions;\r\n","import { useEffect, useState } from \"react\";\r\nimport ProductList from \"../components/products/ProductList\";\r\nimport ProductsFilter from \"../components/filter/ProductsFilter\";\r\n// Context\r\nimport { Context, FilterContext } from \"../Context\";\r\n// Hooks\r\nimport { useSortedByCategoryProducts, useProducts } from \"../hooks/useProducts\";\r\nimport { useStateIfMounted } from \"use-state-if-mounted\";\r\nimport Loader from \"../ui/Loader\";\r\nimport { WC_REST_API_Categories } from \"../types/wc-types\";\r\nimport Pagination from \"../components/pagination/Pagination\";\r\nimport ProductService from \"../api/rest\";\r\nimport { useAppDispatch, useAppSelector } from \"../store/redux\";\r\nimport { fetchGoods } from \"../store/reducers/GoodsReducer\";\r\n\r\nconst Catalog = () => {\r\n  // store\r\n  const dispatch = useAppDispatch();\r\n  const { goods, isLoading, errorText } = useAppSelector(\r\n    (store) => store.GoodsReducer\r\n  );\r\n  const { category, maxCost, orderby, searchQuery } = useAppSelector(\r\n    (store) => store.FilterReducer\r\n  );\r\n  // states\r\n  const [categories, setCategories] = useStateIfMounted<WC_REST_API_Categories>(\r\n    []\r\n  );\r\n  // pagination\r\n  const [limit, setLimit] = useState(18);\r\n  const [page, setPage] = useState(1);\r\n\r\n  const sortedPosts = useSortedByCategoryProducts(category, goods);\r\n  const filtredPosts = useProducts(\r\n    category,\r\n    maxCost,\r\n    orderby,\r\n    searchQuery,\r\n    goods\r\n  );\r\n\r\n  // Initial Render\r\n  useEffect(() => {\r\n    const goodsPromise = dispatch(fetchGoods({ limit, page }));\r\n\r\n    ProductService.getCategories((data) => {\r\n      setCategories(data);\r\n    });\r\n\r\n    return () => {\r\n      goodsPromise.abort();\r\n    };\r\n    // eslint-disable-next-line\r\n  }, [page]);\r\n\r\n  return (\r\n    <Context.Provider value={{ products: filtredPosts, categories, category }}>\r\n      <div className=\"container\">\r\n        <div className=\"row main-section justify-content-between\">\r\n          <aside className=\"col-12 col-md-5 col-lg-4 col-xl-3 mb-4 mb-md-0\">\r\n            <FilterContext.Provider\r\n              value={{\r\n                sortedPosts,\r\n                limit,\r\n                setLimit,\r\n              }}\r\n            >\r\n              <ProductsFilter />\r\n            </FilterContext.Provider>\r\n          </aside>\r\n          <article className=\"col-12 col-md-6 col-lg-7 col-xl-8 mb-5 product-list\">\r\n            {!errorText ? (\r\n              isLoading ? (\r\n                <Loader />\r\n              ) : (\r\n                <>\r\n                  <ProductList />\r\n                  <Pagination\r\n                    page={page}\r\n                    setPage={(page: number) => setPage(page)}\r\n                  />\r\n                </>\r\n              )\r\n            ) : (\r\n              <div>Произошла какая то ошибка - {errorText}</div>\r\n            )}\r\n          </article>\r\n        </div>\r\n      </div>\r\n    </Context.Provider>\r\n  );\r\n};\r\n\r\nexport default Catalog;\r\n","import Product from \"../pages/Product\";\r\nimport Cart from \"../pages/Cart.\";\r\nimport Catalog from \"../pages/Catalog\";\r\nimport IRoute from \"../types/IRoute\";\r\n\r\nconst routes: IRoute[] = [\r\n  {\r\n    path: \"/catalog\",\r\n    component: Catalog,\r\n    exact: true,\r\n    title: \"Laserkids Store - Каталог\",\r\n  },\r\n  {\r\n    path: \"/catalog/:id\",\r\n    component: Product,\r\n    exact: true,\r\n    title: \"Laserkids Store\",\r\n  },\r\n  {\r\n    path: \"/cart/\",\r\n    component: Cart,\r\n    exact: false,\r\n    title: \"Laserkids Store - Корзина товаров\",\r\n  },\r\n];\r\n\r\nexport default routes;\r\n","import { FilterReducer } from \"./reducers/FilterReducer\";\r\nimport { GoodsReducer } from \"./reducers/GoodsReducer\";\r\n\r\nimport { configureStore, combineReducers } from \"@reduxjs/toolkit\";\r\n\r\nconst rootReducer = combineReducers({\r\n  GoodsReducer,\r\n  FilterReducer,\r\n});\r\n\r\nconst setupStore = () => {\r\n  return configureStore({\r\n    reducer: rootReducer,\r\n  });\r\n};\r\n\r\nexport const store = setupStore();\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport type AppStore = ReturnType<typeof setupStore>;\r\nexport type AppDispatch = AppStore[\"dispatch\"];\r\n","import { useEffect, useState } from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport useDidUpdateEffect from \"./hooks/useDidUpdateEffect\";\nimport { calcTotalCart, filterCart, pushCart, getMapProduct } from \"./utils\";\n// Router\nimport MainRouter from \"./router/MainRouter\";\n// Context\nimport { CartContext } from \"./Context\";\n// UI\nimport Header from \"./ui/header/Header\";\n// CSS\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./assets/css/style.scss\";\nimport routes from \"./router\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./store\";\n// import DemoAlert from \"./components/demo/DemoAlert\";\n\nconst App = () => {\n  const [cartMap, setCartMap] = useState({});\n  const [cartCounter, setCartCounter] = useState(0);\n  const [totalCart, setTotalCart] = useState(0);\n\n  // Проверка локальной корзины при рендере\n  useEffect(() => {\n    if (localStorage.getItem(\"WC_Cart\") !== null) {\n      const localCart = JSON.parse(localStorage.getItem(\"WC_Cart\"));\n\n      if (Object.keys(localCart).length !== 0) {\n        setCartMap(localCart);\n        setCartCounter(Object.keys(localCart).length);\n        setTotalCart(calcTotalCart(localCart));\n      }\n    }\n  }, []);\n\n  // Обновление корзины\n  useDidUpdateEffect(() => {\n    localStorage.setItem(\"WC_Cart\", JSON.stringify(cartMap));\n    setCartCounter(Object.keys(cartMap).length);\n    setTotalCart(calcTotalCart(cartMap));\n  }, [cartMap]);\n\n  // --------------------------------------\n\n  const removeProduct = (id: string) => {\n    setCartMap(filterCart(id, cartMap));\n  };\n\n  /**\n   * Calculating the total amount of the product, taking into account its quantity\n   *\n   * @param { string } id ID of the product being counted\n   * @param { number } qty new quantity of products in the cart\n   */\n  const calcTotal = (id: string, qty: number) => {\n    const map = {\n      ...cartMap[id],\n      qty: qty,\n      total: cartMap[id].price * qty,\n    };\n\n    setCartMap((prev) => pushCart(id, map, prev));\n  };\n\n  const addToCart = (product: any, qty: number = 1) => {\n    const map = getMapProduct(product, qty);\n    setCartMap((prev) => pushCart(product.id, map, prev));\n  };\n\n  return (\n    <Provider store={store}>\n      <BrowserRouter>\n        <CartContext.Provider\n          value={{\n            cartMap,\n            cartCounter,\n            totalCart,\n            removeProduct,\n            calcTotal,\n            addToCart,\n          }}\n        >\n          <Header />\n          <MainRouter routes={routes} redirect=\"/catalog\" />\n          {/* <DemoAlert /> */}\n        </CartContext.Provider>\n      </BrowserRouter>\n    </Provider>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","import { FC, useRef } from \"react\";\r\nimport ReactOwlCarousel from \"react-owl-carousel\";\r\nimport { WC_REST_API_Product_Image } from \"../../types/wc-types\";\r\n\r\ninterface IProductImage {\r\n  image: WC_REST_API_Product_Image;\r\n  ind?: number;\r\n  wrapperRef?: any;\r\n}\r\n\r\nconst ProductImage: FC<IProductImage> = ({ image, ind, wrapperRef }) => {\r\n  return (\r\n    <img\r\n      src={image.src ?? \"https://via.placeholder.com/300x300\"}\r\n      alt={image.alt || image.name}\r\n      onLoad={(e) => {\r\n        if (ind === 0) {\r\n          const wrapper = wrapperRef.current.container;\r\n          const imgHeight = $(e.target).css(\"height\");\r\n\r\n          $(wrapper).find(\".owl-stage-outer\").css(\"height\", imgHeight);\r\n        }\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\ninterface PSProps {\r\n  images: WC_REST_API_Product_Image[];\r\n}\r\n\r\nconst ProductSlider: FC<PSProps> = ({ images }) => {\r\n  const sliderRef = useRef(null);\r\n  const previewRef = useRef(null);\r\n\r\n  const previewClick = (ind: number) => {\r\n    if (!previewRef.current?.container) return;\r\n\r\n    const owlItem = $(previewRef.current.container).find(\".owl-item\");\r\n    const activeClass = \"current\";\r\n\r\n    for (let i = 0; i < owlItem.length; i++) {\r\n      owlItem.eq(i).removeClass(activeClass);\r\n    }\r\n\r\n    owlItem.eq(ind).addClass(activeClass);\r\n    $(sliderRef.current.container).trigger(\"to.owl.carousel\", [ind]);\r\n  };\r\n\r\n  const slidesPerPage = 3; //globaly define number of elements per page\r\n  const syncedSecondary = true;\r\n\r\n  function syncPosition(el: any) {\r\n    const sync2 = $(\".previewSlider\");\r\n\r\n    //if you set loop to false, you have to restore this next line\r\n    const current = el.item.index;\r\n\r\n    //if you disable loop you have to comment this block\r\n    // var count = el.item.count - 1;\r\n    // var current = Math.round(el.item.index - el.item.count / 2 - 0.5);\r\n\r\n    // if (current < 0) {\r\n    //   current = count;\r\n    // }\r\n    // if (current > count) {\r\n    //   current = 0;\r\n    // }\r\n\r\n    //end block\r\n\r\n    sync2\r\n      .find(\".owl-item\")\r\n      .removeClass(\"current\")\r\n      .eq(current)\r\n      .addClass(\"current\");\r\n\r\n    const onscreen = sync2.find(\".owl-item.active\").length - 1;\r\n    const start = sync2.find(\".owl-item.active\").first().index();\r\n    const end = sync2.find(\".owl-item.active\").last().index();\r\n\r\n    if (current > end) {\r\n      sync2.trigger(\"to.owl.carousel\", [current, 100, true]);\r\n    }\r\n\r\n    if (current < start) {\r\n      sync2.trigger(\"to.owl.carousel\", [current - onscreen, 100, true]);\r\n    }\r\n  }\r\n\r\n  function syncPosition2(el: any) {\r\n    if (syncedSecondary) {\r\n      const sync1 = $(\".product-images\");\r\n      var number = el.item.index;\r\n      sync1.trigger(\"to.owl.carousel\", [number, 100, true]);\r\n    }\r\n  }\r\n  const sliderPrms = {\r\n    items: 1,\r\n    dots: false,\r\n    nav: false,\r\n    margin: 10,\r\n    responsive: {\r\n      0: {\r\n        items: 1,\r\n        autoHeight: true,\r\n      },\r\n      768: {\r\n        items: 1,\r\n        autoHeight: true,\r\n      },\r\n    },\r\n    onChanged: syncPosition,\r\n  };\r\n\r\n  const previewPrms = {\r\n    onInitialized: (e: any) => {\r\n      $(e.target).find(\".owl-item\").eq(0).addClass(\"current\");\r\n    },\r\n    items: slidesPerPage,\r\n    dots: false,\r\n    nav: true,\r\n    margin: 5,\r\n    slideBy: slidesPerPage,\r\n    responsiveRefreshRate: 100,\r\n    onChanged: syncPosition2,\r\n  };\r\n\r\n  if (images.length < 2) {\r\n    return (\r\n      <div className=\"product-image\">\r\n        <a\r\n          href={images[0].src}\r\n          target=\"_blank\"\r\n          rel=\"noreferrer\"\r\n          style={{ display: \"block\" }}\r\n        >\r\n          <ProductImage image={images[0]} />\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* images slider */}\r\n      <ReactOwlCarousel\r\n        className=\"owl-theme product-images\"\r\n        {...sliderPrms}\r\n        ref={sliderRef}\r\n      >\r\n        {images.map((img, ind) => (\r\n          <ProductImage\r\n            image={img}\r\n            key={img.id}\r\n            ind={ind}\r\n            wrapperRef={sliderRef}\r\n          />\r\n        ))}\r\n      </ReactOwlCarousel>\r\n      {/* images preview */}\r\n      <div className=\"product-images__preview mt-2\">\r\n        <ReactOwlCarousel\r\n          {...previewPrms}\r\n          className=\"previewSlider\"\r\n          ref={previewRef}\r\n        >\r\n          {images.map((img, ind) => (\r\n            <img\r\n              src={img.src}\r\n              alt={img.alt || img.name}\r\n              key={img.id}\r\n              onClick={() => previewClick(ind)}\r\n            />\r\n          ))}\r\n        </ReactOwlCarousel>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductSlider;\r\n"],"sourceRoot":""}